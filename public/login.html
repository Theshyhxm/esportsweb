<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Start Esports</title>
  <link rel="stylesheet" href="/css/login.css">
<style>
    #popup {
        position: fixed; /* 将弹窗固定在页面上 */
        top: 50%; /* 水平居中显示 */
        left: 50%;
        transform: translate(-50%, -50%); /* 垂直居中显示 */
        width: 200px; /* 设置宽度 */
        height: 60px; /* 设置高度 */
        background-color: transparent; /* 设置背景色 */
        //border: 1px solid #ccc; /* 添加边框 */
        text-align: center;
        color: #36d344;
    }
</style>
</head>
<body>
<div id="LoginApp">



<!-- partial:index.partial.html -->
<!-- I did my best to fully document this page so I hope you find everything well explained and detailed for your understanding :D
And if you do, a like/comment/pin would be much apprecieated :) -->

<!-- PS: make sure to interact with everything for hidden features -->

<link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css"> <!-- stylesheet of all the used icons -->
    <link rel="stylesheet" href="css/messageBox.css">
    <div class="block-mobile-landscape">Please rotate your device</div> <!-- this div will be visible only when the user has a mobile in landscape mode as it is too small for the content -->
    <!-- 创建一个消息提示框 -->
    <div id="messageBox" class="message-box">
        <p id="messageContent">这是一条默认消息！</p>
    </div>
  <div class="slider" id="slider">

    <div class="container" id="container">

      <div class="left" id="left">

        <div class="content login active" id="login">
          <div class="title">Start Esports</div>
          <!-- every form's validation and sumbission will be done with js -->
          <form method="post" novalidate id="MyLogin">
              <div class="tip">
                  <!-- 这是新的标签的插入位置 -->
              </div>
              <div class="info">
              <div class="label-wrapper">
                  <label class="label" for="user"><i class="uil uil-user"></i>&nbsp; Email or phone number</label></div>
              <!-- I left these icons in case someone wants to use them with server side development so they won't be used here -->
              <i class="uil uil-check-circle validation-icon valid input-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon"></i>
              <input name="loginUser" type="text" class="input" id="loginUser" required>
              <!-- more on this span in the css -->
              <span class="border-corner-cover"></span>
            </div>
            <div class="info">
              <div class="label-wrapper"><label class="label" for="password"><i class="uil uil-lock-alt"></i>&nbsp; Password</label></div>
              <i class="uil uil-check-circle validation-icon valid input-icon password-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon password-icon"></i>
              <input name="password" type="password" class="input password" required>
              <span class="border-corner-cover"></span>
              <i class="uil uil-eye input-icon password-eye"><i class="uil uil-line-alt password-eye-line"></i><span data-tooltip = "show password"></span></i>
            </div>
            <div class="info">
              <div class="presubmition-options">
                  <label for="remember-me" class="checkmark-label"><input type="checkbox"><span class="checkmark"></span><span>Remember me</span></label>
                  <span class="forgot-pass" id="forgot-pass">Forgot password?</span>
              </div>
            </div>
            <button type="button" onclick="mySubmit()" class="button">Sign In</button>
          </form>
          <!-- the button responsible for sliding -->
          <div class="slide-button-container">Don't have an account? <span id="signup-slide-button" class="slide-button">Sign Up</span></div>
        </div>

        <div class="content recover" id="recover">
          <div class="title">Recover Account</div>
          <form method="post" novalidate>
            <div class="recovery-details">Enter your email or phone and we'll send you a link to get back into your account.</div>
            <div class="info">
              <div class="label-wrapper"><label class="label" for="user"><i class="uil uil-mailbox"></i>&nbsp; Email or phone</label></div>
              <i class="uil uil-check-circle validation-icon valid input-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon"></i>
              <input name="recoverUser" type="text" class="input" id="recoverUser" required>
              <span class="border-corner-cover"></span>
            </div>
              <div class="info">
                  <div class="label-wrapper"><label class="label" for="password"><i class="uil uil-lock-alt"></i>&nbsp;New  Password</label></div>
                  <i class="uil uil-check-circle validation-icon valid input-icon password-icon"></i>
                  <i class="uil uil-times-circle validation-icon invalid input-icon password-icon"></i>
                  <input name="password" type="password" class="input password" id="newPassword" required>
                  <span class="border-corner-cover"></span>
                  <i class="uil uil-eye input-icon password-eye"><i class="uil uil-line-alt password-eye-line"></i><span data-tooltip = "show password"></span></i>
              </div>
              <div class="info">
                  <div class="label-wrapper"><label class="label" for="user"><i class="uil uil-mailbox"></i>&nbsp; Enter the Captcha</label></div>
                  <i class="uil uil-check-circle validation-icon valid input-icon"></i>
                  <i class="uil uil-times-circle validation-icon invalid input-icon"></i>
                  <input name="Captcha" type="text" class="input" id="RecoverCaptcha" required>
                  <span class="border-corner-cover"></span>
              </div>
              <input  class="input" type="button" onclick="sendCaptcha(2)" value="SEND" id="sendButton">
              <p id="countdown"></p>
            <button type="submit" class="button send-verification" onclick="MyRecover()">Update</button>
            <div class="or">OR</div>
            <div class="new-account"><span id="new-account">Create New Account</span></div>
          </form>
          <div class="slide-button-container"><span id="back-to-login" class="slide-button back-to-login">Back to Login</span></div>
        </div>
      </div>

      <div class="right" id="right">
        <div class="content">

          <div class="title">Sign Up</div>
          <form method="post" novalidate>
            <div class="info">
              <div class="label-wrapper"><label class="label" for="user" id="user-label"><i class="uil uil-user"></i>&nbsp; Email or phone number</label></div>
              <i class="uil uil-check-circle validation-icon valid input-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon"></i>
              <input name="user" type="text" class="input user" id="user" required>
              <span class="border-corner-cover"></span>
            </div>
            <div class="info">
              <div class="label-wrapper"><label class="label" for="password" id="password-label"><i class="uil uil-lock"></i>&nbsp; Password</label></div>
              <i class="uil uil-check-circle validation-icon valid input-icon password-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon password-icon"></i>
              <input name="password" type="password" class="input password" id="password" required>
              <span class="border-corner-cover"></span>
              <i class="uil uil-eye input-icon password-eye"><i class="uil uil-line-alt password-eye-line"></i><span data-tooltip = "show password"></span></i>
              <div class="password-requirements-container" id="password-requirements-container">
                <ul class="password-requirements" id="password-requirements">
                  <li id="password-requirements-length"><i class="uil uil-info-circle"></i>&nbsp;Between 8 and 32 characters</li>
                  <li id="password-requirements-number"><i class="uil uil-info-circle"></i>&nbsp;Contains at least 1 number</li>
                  <li id="password-requirements-lower"><i class="uil uil-info-circle"></i>&nbsp;Contains at least 1 lowercase letter</li>
                  <li id="password-requirements-upper"><i class="uil uil-info-circle"></i>&nbsp;Contains at least 1 uppercase letter</li>
                  <li id="password-requirements-special"><i class="uil uil-info-circle"></i>&nbsp;Contains at least 1 special character</li>
                </ul>
              </div>
            </div>
            <div class="info">
              <div class="label-wrapper"><label class="label" for="confirm-password" id="confirm-password-label"><i class="uil uil-lock-access"></i>&nbsp; Confirm password</label></div>
              <i class="uil uil-check-circle validation-icon valid input-icon password-icon"></i>
              <i class="uil uil-times-circle validation-icon invalid input-icon password-icon"></i>
              <input name="confirm-password" type="password" class="input password" id="confirm-password" required>
              <span class="border-corner-cover"></span>
              <i class="uil uil-eye input-icon password-eye"><i class="uil uil-line-alt password-eye-line"></i><span data-tooltip = "show password"></span></i>
            </div>
              <div class="info">
              <div class="info">
                  <div class="label-wrapper"><label class="label" for="user" id="user-label"><i class="uil uil-envelope-alt"></i>&nbsp; Verification code</label></div>
                  <i class="uil uil-check-circle validation-icon valid input-icon"></i>
                  <i class="uil uil-times-circle validation-icon invalid input-icon"></i>
                  <input name="registryCaptcha" type="text" class="input" id="registryCaptcha" required>
                  <input  class="input" type="button" onclick="sendCaptcha(1)" value="SEND" id="sendButton">
                  <p id="countdown"></p>
                  <span class="border-corner-cover"></span>
              </div>
            <div class="info">
              <label for="tos" class="checkmark-label tos"><input type="checkbox" required><span class="checkmark"></span><span class="tos-text">I HAVE MOST DEFINITELY SPENT 10 HOURS OF MY TIME IN ORDER TO HAVE READ AND AGREED TO THE <a>TERMS OF SERVICE</a> AND <a> PRIVACY POLICY</a></span></label>
            </div>
            <button type="submit" class="button" onclick="MyRegister()">Register</button>
                  <button type="button" onclick="testMessage()">test</button>
              </div>
          </form>
          <div class="slide-button-container">Already have an account? <span id="login-slide-button" class="slide-button">Login</span></div>

        </div>

      </div>

    </div>

  </div>
  
  <!-- Everything below is for extra themes and will not be documented -->
  <i class="uil uil-sort-amount-up open-themes-button" id="open-themes"></i>
  <div class="themes" id="themes">
    <i class="uil uil-sort-amount-down close-themes-button" id="close-themes"></i>
    <span> Here are some other themes which I made that you can choose from: </span>
    <div class="theme-styles-container">
      <label for="sakura" class="radio-label theme-label"><input type="radio" name="theme" checked><span class="radio"></span>Sakura (default)</label>
      <label for="winter" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Winter</label> 
      <label for="fall" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Fall</label>
      <label for="sunset" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Sunset</label>
      <label for="mountain" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Mountain</label>
      <label for="city" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>City Lights</label>
      <label for="ocean" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Ocean</label>
      <label for="lanterns" class="radio-label theme-label"><input type="radio" name="theme"><span class="radio"></span>Floating Lanterns</label>
    </div>
    <span>*Theme images are in 4k-8k resolution so please wait for them to load.</span>
    <div class="extra-theme-options">
      <span class="add-own-theme" id="add-own-theme">Add your own theme</span>
      <span class="remove-themes" id="remove-themes">Remove palette</span>
    </div>
    <div class="own-theme">
      <span class="back-to-themes" id="back-from-own-theme"><i class="uil uil-arrow-left"></i>Back </span>
      <span class="clear-custom-theme" id="clear-custom-theme">Clear Custom Theme</span>
      <form id="custom-theme-form" autocomplete="off">
        <div><label for="--background-image">Background: </label><input name="--background-image" class="own-theme-input" placeholder="An image, usually of nature"></div>
        <div class="colors">
          <div><input type="color" name="--primary-color" class="own-theme-input"><label for="--primary-color">Primary-Color</label></div>
          <div><input type="color" name="--secondary-color" class="own-theme-input"><label for="--secondary-color">Secondary-Color</label></div>
          <div><input type="color" name="--body-color" class="own-theme-input"><label for="--body-color">Body-Color</label></div>
          <div><input type="color" name="--title-color" class="own-theme-input"><label for="--title-color">Title-Color: </label></div>
          <div><input type="color" name="--text-color" class="own-theme-input"><label for="--text-color"></label>Text-Color</div>
          <div><input type="color" name="--valid-color" class="own-theme-input"><label for="--valid-color"></label>Valid-Color</div>
          <div><input type="color" name="--invalid-color" class="own-theme-input"><label for="--invalid-color"></label>Invalid-Color</div>
        </div>
        <input type="submit" class="button" value="Apply Theme">
      </form>
    </div>
    <div class="remove-themes-confirm-container">
      <span>Are you sure you would like to remove this palette completely?</span>
      <span>You will be unable to pick or make new themes unless you refresh the page.</span> 
      <div>
        <span class="back-to-themes" id="back-from-remove-themes"><i class="uil uil-arrow-left"></i>Back</span>
        <span class="remove-themes-confirm" id="remove-themes-confirm">CONFIRM</span>
      </div>
    </div>
  </div>
<!-- partial -->
<script src="js/messageBox.js"></script>
    <script>
        //type 1:注册 2.找回
        function sendCaptcha(type){
            console.log(type)
            if (type==1){
                var user= document.getElementById('user').value;
            }
            if (type==2){
                var user= document.getElementById('recoverUser').value;
            }
            alert(user)
            fetch('http://127.0.0.1:8127/user/sendCaptcha', {
                method: 'POST', // 或者 'POST', 'PUT', 'DELETE' 等
                headers: {
                    'Content-Type': 'application/json'
                },
                // 如果需要发送数据，可以使用以下方式
                body: JSON.stringify({ user: user ,type:type})
            })
                .then(response =>response.json().then((data)=>{
                    console.log(data)
                    showMessage("success","验证码发送成功")
                    // openPopup("验证码发送成功");
                }))
                .catch((error) => {
                    showMessage("error","验证码发送失败")
                    console.error('Error:', error);
                });

        }

        function MyRegister(){
            var captcha= document.getElementById('registryCaptcha').value;
            var user= document.getElementById('user').value;
            var password= document.getElementById('confirm-password').value;
            fetch('http://127.0.0.1:8127/user/registry', {
                method: 'POST', // 或者 'POST', 'PUT', 'DELETE' 等
                headers: {
                    'Content-Type': 'application/json'
                },
                // 如果需要发送数据，可以使用以下方式
                body: JSON.stringify({ user: user,password: password ,captcha: captcha})
            })
                .then(response =>response.json().then((data)=>{
                    console.log(data+"data")
                    if (data=="200"){
                        // openPopup("注册成功");
                        showMessage("success","注册成功")
                        window.location.href="/login.html"
                    }
                }))
                .catch((error) => {
                    console.error('Error:', error);
                });


        }

        function MyRecover(){
            var captcha= document.getElementById('RecoverCaptcha').value;
            var user= document.getElementById('recoverUser').value;
            var password= document.getElementById('newPassword').value;
            fetch('http://127.0.0.1:8127/user/recoverUser', {
                method: 'POST', // 或者 'POST', 'PUT', 'DELETE' 等
                headers: {
                    'Content-Type': 'application/json'
                },
                // 如果需要发送数据，可以使用以下方式
                body: JSON.stringify({ user: user,password: password ,captcha: captcha})
            })
                .then(response =>response.json().then((data)=>{
                     if (data.code==200){
                         // openPopup("重置密码成功");
                         window.location.href="/login.html"
                     }
                }))
                .catch((error) => {
                    console.error('Error:', error);
                });


        }


        function mySubmit(){

           var loginUser= document.getElementById('loginUser').value;
           var password= document.getElementsByClassName("password")[0].value;
           // var recoverUser= document.getElementById("recoverUser").value//找回密码
           // Captcha//验证码
           // user//用户注册
           // confirm-password//注册密码
           fetch('http://192.168.123.60:8127/login', {
               method: 'POST', // 或者 'POST', 'PUT', 'DELETE' 等
               headers: {
                   'Content-Type': 'application/json'
               },
               // 如果需要发送数据，可以使用以下方式
               body: JSON.stringify({ username: loginUser,password:password })
           })
               .then(response =>response.json().then((data)=>{
                   if (data.code=="200"){
                       localStorage.setItem('token', data.data);//在localStorage中存入token
                       window.location.href="/index.html"
                   }

                   // 获取要插入新标签的位置
                   var tipDiv = document.querySelector('.tip');
                   while (tipDiv.firstChild) {
                       tipDiv.removeChild(tipDiv.firstChild);
                   }
                   // 创建新的标签元素
                   var newLabel = document.createElement('label');
                   newLabel.textContent = data.message; // 设置新标签的文本内容
                   // newLabel.classList.add('label'); // 添加相同的样式类（如果需要）
                   // 将新标签添加到指定位置
                   tipDiv.appendChild(newLabel);
                   console.log(tipDiv)
               }))
               .catch((error) => {
                   console.error('Error:', error);
               });
           console.log(loginUser)
           console.log(password)
            // window.location.href="/"
       }
    </script>
<script  src="js/login.js"></script>
<script src="js/countdown.js"></script>
</div>
</body>
</html>
